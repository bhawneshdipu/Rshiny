{
    "collab_server" : "",
    "contents" : "## Preprocessing ##\n\n\n#====================Preprocesing===============================\n\nfunction.MyPreprocessing<-function(data1,channel,daterange) {\n  \n  fromdate<-as.Date(daterange[0])\n  todate<-as.Date(daterange[1])\n  #chnge format of Date\n  data1$Date_Time <- data1$Date\n  data1$Date_Time <-do.call(paste, c(data1[c(\"Date_Time\", \"Time\")], sep = \"\"))\n  data1$Date_Time <- as.POSIXct(data1$Date_Time, format = \"%d%m%y%H%M\")\n  data1$Date_Time <- as.Date(data1$Date_Time, \"%d%m%y%H%M\")\n  data1$Date <- as.POSIXct(data1$Date,format = \"%d%m%y\")\n  \n  \n  \n  #View(daterange)\n  fromdate <- format(as.Date(daterange[0]), \"%d-%m-%Y %H:%M:%S\")\n  todate <- format(as.Date(daterange[1]), \"%d-%m-%Y %H:%M:%S\")\n  data1<-data1[data1$Date_Time>=fromdate & data1$Date_Time<=todate,]\n  #data1<-date1[date1$Date_Time>=fromdate & date1$Date_Time<=todate,]\n  \n  \n  data1 <- data1[, c(ncol(data1), 1:(ncol(data1) - 1))]\n  \n  \n  \n  #Add \":\" in time\n  data1$Time <- sub(\"(.{2})(.*)\", \"\\\\1:\\\\2\", data1$Time)\n  \n  \n  #Necessarily Columns as.factor\n  data1$CHANNEL <- as.numeric(data1$CHANNEL)\n  data1$LOCATION <- as.factor(data1$LOCATION)\n  data1$SITE <- as.factor(data1$SITE)\n  data1$FILENAME <- as.factor(data1$FILENAME)\n  data1$INSTRUMENT <- as.factor(data1$INSTRUMENT)\n  data1$HEADINGS <- as.factor(data1$HEADINGS)\n  #data1$Time <- as.numeric(data1$Time)\n  #set measured data as numeric\n  data1$SP1 = as.numeric(data1$SP1)\n  data1$SP2 = as.numeric(data1$SP2)\n  data1$SP3 = as.numeric(data1$SP3)\n  data1$SP4 = as.numeric(data1$SP4)\n  data1$SP5 = as.numeric(data1$SP5)\n  data1$SP6 = as.numeric(data1$SP6)\n  data1$SP7 = as.numeric(data1$SP7)\n  data1$SP8 = as.numeric(data1$SP8)\n  data1$SP9 = as.numeric(data1$SP9)\n  data1$SP10 = as.numeric(data1$SP10)\n  data1$SP11 = as.numeric(data1$SP11)\n  data1$SP12 = as.numeric(data1$SP12)\n  data1$SP13 = as.numeric(data1$SP13)\n  data1$SP14 = as.numeric(data1$SP14)\n  \n  data1$LN1 = as.numeric(data1$LN1)\n  data1$LN2 = as.numeric(data1$LN2)\n  data1$LN3 = as.numeric(data1$LN3)\n  data1$LN4 = as.numeric(data1$LN4)\n  data1$LN5 = as.numeric(data1$LN5)\n  data1$LN6 = as.numeric(data1$LN6)\n  data1$LN7 = as.numeric(data1$LN7)\n  data1$LN8 = as.numeric(data1$LN8)\n  data1$LN9 = as.numeric(data1$LN9)\n  \n  data1$CS1 = as.numeric(data1$CS1)\n  data1$CS2 = as.numeric(data1$CS2)\n  data1$CS3 = as.numeric(data1$CS3)\n  data1$CS4 = as.numeric(data1$CS4)\n  data1$CS5 = as.numeric(data1$CS5)\n  data1$CS6 = as.numeric(data1$CS6)\n  \n  \n  #add column sum of cars in interval\n  data1$SUM <- rowSums(data1[, 5:18])\n  \n  #unfinished preparation I will explain what I need\n  \n  splitH <- str_split_fixed(data1$HEADINGS, \" \", 4)\n  splitH <- as.data.frame(splitH)\n  splitH <- unique(splitH)\n  # View(splitH)\n  # View(data1)\n  # View(colnames(splitH))\n  # View(colnames(splitH)[2])\n  \n  #commented to get only channel data\n  \n  #data1$CHANNEL1 <- data1$CHANNEL\n  \n  data1<-data1[data1$CHANNEL==paste0(channel),]\n  \n  colnames(splitH) <- \"CHANNEL1\"\n  colnames(splitH)[2] <- \"CHANNEL2\"\n  colnames(splitH)[3] <- \"CHANNEL3\"\n  colnames(splitH)[4] <- \"CHANNEL4\"\n  #View(splitH)\n  splitH$rowNames <- row.names.data.frame(splitH)\n  #replace.if\n  # for (i in vector) {\n  #   data1$CHANNEL<-gsub(\"1\", splitH[1,1], data1$CHANNEL)\n  #   data1$CHANNEL<-gsub(\"2\", splitH[1,2], data1$CHANNEL)\n  #   data1$CHANNEL<-gsub(\"3\", splitH[1,3], data1$CHANNEL)\n  #   data1$CHANNEL<-gsub(\"4\", splitH[1,4], data1$CHANNEL)\n  # }\n  \n  \n  #data1$CHANNEL <-do.call(paste, c(data1[c(\"CHANNEL1\", \"CHANNEL\")], sep = \"_\"))\n  \n  #data1$CHANNEL <-do.call(paste, c(data1[c(paste0(\"CHANNEL\",channel), \"CHANNEL\")], sep = \"_\"))\n  #commented by dipu\n  #data1$CHANNEL <- do.call(paste,c(data1[c(\"CHANNEL1\",\"CHANNEL\")],sep = \"_\"))\n  \n  data1$CHANNEL = as.factor(data1$CHANNEL)\n  data1$Time = as.factor(data1$Time)\n  \n  data1\n}\n",
    "created" : 1522653599221.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3331959525",
    "id" : "8B2003AE",
    "lastKnownWriteTime" : 1522818603,
    "last_content_update" : 1522818603454,
    "path" : "~/fiverr/Rshiny/Preprocessing.R",
    "project_path" : "Preprocessing.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}